:root {
  --primary-color: #ff9800; /* Warm accent */
  --text-color: #333;
  --bg-color: #f7f9fc;
  --card-bg: #ffffff;
  --header-height: 60px;
  --footer-bg: #2c3e50;
  --footer-text: #ecf0f1;
  --font-body: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  --font-heading: 'Georgia', serif;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: var(--font-body);
  color: var(--text-color);
  background-color: var(--bg-color);
  /* Overlay with 50% opacity white to make background less intrusive */
  background-image: linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)), url('../images/bg-cover.jpeg');
  background-attachment: fixed;
  background-size: cover;
  background-position: center;
  line-height: 1.6;
}

a {
  text-decoration: none;
  color: inherit;
  transition: color 0.3s;
}

a:hover {
  color: var(--primary-color);
}

ul {
  list-style: none;
}

/* Header */
.header {
  position: relative;
  background-size: cover;
  background-position: center;
  color: #fff;
  min-height: 400px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.4);
}

.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 40px;
  position: relative;
  z-index: 10;
}

.logo a {
  font-size: 24px;
  font-weight: bold;
  font-family: var(--font-heading);
}

.menu {
  display: flex;
  gap: 20px;
}

.menu-link {
  font-size: 16px;
  font-weight: 500;
  text-transform: uppercase;
}

.hero {
  position: relative;
  z-index: 10;
  text-align: center;
  margin-bottom: 80px;
}

.hero-title {
  font-size: 48px;
  font-family: var(--font-heading);
  margin-bottom: 20px;
  padding: 0 40px;
}

.hero-subtitle {
  font-size: 20px;
  opacity: 0.9;
}

/* Container */
.container {
  max-width: 1200px; /* Wider for sidebar */
  margin: -60px auto 40px; /* Overlap header */
  padding: 0 20px;
  position: relative;
  z-index: 20;
}

.content-wrapper {
  display: flex;
  gap: 40px;
}

.post-list {
  flex: 2; /* Takes up 2/3 of space */
  display: flex;
  flex-direction: column;
  gap: 30px;
}

.sidebar-wrapper {
  flex: 1; /* Takes up 1/3 of space */
  min-width: 300px;
}

/* Sidebar Styles */
.sidebar {
  position: sticky;
  top: 20px;
}

.profile-card, .widget {
  background: var(--card-bg);
  border-radius: 12px;
  padding: 30px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
  margin-bottom: 30px;
  text-align: center;
}

.profile-card .avatar img {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  object-fit: cover;
  border: 4px solid #fff;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  margin-bottom: 15px;
}

.author-name {
  font-size: 22px;
  font-family: var(--font-heading);
  margin-bottom: 10px;
}

.author-description {
  font-size: 14px;
  color: #666;
  margin-bottom: 20px;
}

.social-links {
  display: flex;
  justify-content: center;
  gap: 15px;
}

.social-link {
  font-size: 14px;
  color: #888;
  border: 1px solid #ddd;
  padding: 5px 10px;
  border-radius: 20px;
}

.social-link:hover {
  background: var(--primary-color);
  color: #fff;
  border-color: var(--primary-color);
}

.widget-title {
  font-size: 18px;
  border-bottom: 2px solid var(--primary-color);
  padding-bottom: 10px;
  margin-bottom: 20px;
  display: inline-block;
}

.widget ul {
  text-align: left;
}

.widget li {
  margin-bottom: 10px;
  border-bottom: 1px solid #f0f0f0;
  padding-bottom: 5px;
}

.widget li:last-child {
  border-bottom: none;
}

/* Tag Cloud / Capsules Style */
.widget .tag-list {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  padding: 0;
  justify-content: center;
}

.widget .tag-list-item {
  display: inline-flex;
  align-items: center; /* Fix alignment */
  border-bottom: none;
  margin-bottom: 0;
  padding: 0;
}

.widget .tag-list-link {
  display: inline-block;
  padding: 5px 12px;
  background: #f0f2f5;
  border-radius: 20px 0 0 20px; /* Capsule shape left */
  color: #555;
  font-size: 13px;
  line-height: 1.5;
  transition: all 0.3s ease;
  border: 1px solid #e1e4e8;
  border-right: none;
}

.widget .tag-list-link::before {
  content: "# ";
  opacity: 0.6;
}

.widget .tag-list-count {
  display: inline-block;
  padding: 5px 10px;
  background: #eef1f6;
  border-radius: 0 20px 20px 0; /* Capsule shape right */
  color: #555;
  font-size: 13px; /* Match font size */
  border: 1px solid #e1e4e8;
  border-left: 1px solid #fff;
  line-height: 1.5; /* Ensure vertical alignment matches link */
  transition: all 0.3s ease;
}

.widget .tag-list-item:hover .tag-list-link {
  background: var(--primary-color);
  color: #fff;
  border-color: var(--primary-color);
}

.widget .tag-list-item:hover .tag-list-count {
  background: var(--primary-color);
  border-color: var(--primary-color);
  border-left-color: rgba(255, 255, 255, 0.3);
  color: #fff;
}


/* Cards (Updated for List view or Stacked Grid) */
.post-card {
  background: rgba(255, 255, 255, 0.75); /* Semi-transparent for right side */
  backdrop-filter: blur(10px); /* Frosted glass effect */
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
  transition: transform 0.3s, box-shadow 0.3s;
}

.post-card-link {
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
}

@media (min-width: 768px) {
    .post-card {
        height: 250px;
    }
    .post-card-link {
        flex-direction: row;
    }
    .post-cover {
        flex: 1;
        height: 100%;
    }
    .post-info {
        flex: 1.5;
        padding: 30px;
    }
}

.post-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

.post-cover {
  display: block;
  height: 200px;
  background-size: cover;
  background-position: center;
}

@media (min-width: 768px) {
    .post-cover {
        height: 100%; /* Reset height for flex row */
    }
}

.post-info {
  padding: 25px;
}

.post-title {
  font-size: 22px;
  margin-bottom: 10px;
  font-weight: bold;
}

.post-title a {
  color: inherit;
  text-decoration: none;
}

.post-title a:hover {
  color: var(--primary-color);
}


.post-meta {
  font-size: 14px;
  color: #888;
  margin-bottom: 15px;
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 15px;
}

.post-tags {
  display: inline-flex;
  gap: 8px;
}

.post-tag {
  background: rgba(0,0,0,0.05);
  padding: 2px 10px;
  border-radius: 12px;
  font-size: 12px;
  color: #666;
  transition: all 0.2s;
}

.post-tag:hover {
  background: var(--primary-color);
  color: white;
}

.post-excerpt {
  font-size: 15px;
  color: #555;
  line-height: 1.5;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Post Detail, Archive, etc. needs to handle sidebar? 
   Currently simple pages might not need sidebar, 
   or we can add it to layout.ejs if requested. 
   For now, keeping them simple full width or contained.
*/

.post-container, .archive-container {
    background: var(--card-bg);
    padding: 40px;
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    max-width: 900px; /* Center content */
    margin-left: auto;
    margin-right: auto;
}

/* Cards */
/* ... removed grid specific to old layout ... */

/* Post Detail Content Styling */
.post-content {
  font-size: 17px;
  line-height: 1.8;
  color: #333;
  overflow-wrap: break-word;
}

.post-content h2 {
  font-size: 1.8em;
  margin-top: 40px;
  margin-bottom: 20px;
  font-weight: 700;
  color: #2c3e50;
  padding-bottom: 10px;
  border-bottom: 1px solid #eee;
}

.post-content h3 {
  font-size: 1.5em;
  margin-top: 30px;
  margin-bottom: 15px;
  font-weight: 600;
  color: #34495e;
}

.post-content h4 {
  font-size: 1.25em;
  margin-top: 25px;
  margin-bottom: 10px;
  font-weight: 600;
}

.post-content p {
  margin-bottom: 20px;
}

.post-content a {
  color: var(--primary-color);
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: border-color 0.2s;
}

.post-content a:hover {
  border-bottom-color: var(--primary-color);
}

.post-content ul, .post-content ol {
  margin-bottom: 20px;
  padding-left: 20px;
}

.post-content li {
  margin-bottom: 8px;
}

.post-content blockquote {
  background: #f8f9fa;
  border-left: 5px solid var(--primary-color);
  padding: 15px 20px;
  margin: 20px 0;
  color: #555;
  border-radius: 4px;
}

.post-content blockquote p:last-child {
  margin-bottom: 0;
}

.post-content img {
  max-width: 100%;
  border-radius: 8px;
  display: block;
  margin: 20px auto;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

/* Inline code */
.post-content code {
  background: #f0f2f5;
  padding: 2px 6px;
  border-radius: 4px;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  font-size: 0.9em;
  color: #c7254e;
}

/* Code blocks (Hexo usually wraps in figure.highlight or pre code) */
.post-content pre {
  background: #2d2d2d;
  color: #ccc;
  padding: 15px;
  border-radius: 8px;
  overflow-x: auto;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  font-size: 14px;
  margin: 20px 0;
  line-height: 1.5;
}

.post-content pre code {
  background: none;
  color: inherit;
  padding: 0;
}

/* Hexo Highlight (Figure) Fix - Overriding Generic Table Styles */
.post-content .highlight {
  background: #282c34;
  border-radius: 8px;
  margin: 20px 0;
  overflow-x: auto;
  color: #abb2bf;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

.post-content .highlight table {
  margin: 0;
  width: 100%;
  border: none;
  border-collapse: collapse;
}

.post-content .highlight td, 
.post-content .highlight th {
  border: none;
  padding: 0;
}

.post-content .highlight .gutter {
  width: 1%;
  color: #636d83;
  background: #2c313a;
  padding: 10px 10px;
  text-align: right;
  border-right: 1px solid #3e4451;
  user-select: none;
  vertical-align: top;
}

.post-content .highlight .code {
  padding: 10px 15px;
  vertical-align: top;
  width: 99%;
}

.post-content .highlight pre {
  margin: 0;
  padding: 0;
  background: none;
  color: inherit;
  border: none;
  border-radius: 0;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  font-size: 14px;
  line-height: 1.5;
}

.post-content .highlight tr:nth-child(even) {
  background-color: transparent;
}

/* Tables (Generic) */
.post-content table {
  width: 100%;
  border-collapse: collapse;
  margin: 20px 0;
  font-size: 16px;
}

.post-content th, .post-content td {
  padding: 12px 15px;
  border: 1px solid #e1e4e8;
  text-align: left;
}

.post-content th {
  background-color: #f6f8fa;
  font-weight: 600;
}

.post-content tr:nth-child(even) {
  background-color: #fbfbfc;
}

.post-content hr {
  height: 1px;
  border: none;
  background-color: #e1e4e8;
  margin: 40px 0;
}

/* Archive Header Card (Tag/Category/Archive) */
.archive-header-card {
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  padding: 15px 30px;
  margin-bottom: 20px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(255, 255, 255, 0.5);
}

.archive-header-icon {
  font-size: 20px;
  color: var(--primary-color);
  margin-bottom: 5px;
  width: 40px;
  height: 40px;
  background: rgba(255, 152, 0, 0.1);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}

.archive-header-title {
  font-size: 28px;
  font-weight: 700;
  color: #333;
  margin: 0 0 5px 0;
}

.archive-header-desc {
  color: #777;
  font-size: 14px;
}

/* Pagination & Navigation */
.pagination, .post-navigation {
  margin-top: 40px;
  text-align: center;
  display: flex;
  justify-content: center;
  gap: 20px;
}

.page-number, .extend {
  display: inline-block;
  padding: 8px 16px;
  background: #fff;
  border-radius: 4px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

.page-number.current {
  background: var(--primary-color);
  color: #fff;
}

.post-navigation {
  justify-content: space-between;
  border-top: 1px solid #eee;
  padding-top: 20px;
}

.nav-prev, .nav-next {
  font-weight: bold;
}

/* Footer */
.footer {
  background: var(--footer-bg);
  color: var(--footer-text);
  text-align: center;
  padding: 40px 20px;
  margin-top: 60px;
}

.footer a {
  color: #fff;
  text-decoration: underline;
}

@media (max-width: 900px) {
  .content-wrapper {
    flex-direction: column;
  }
  .post-list, .sidebar-wrapper {
    flex: auto;
  }
  .hero-title {
    font-size: 32px;
  }
  .container {
    margin-top: 20px;
  }
}

/* Post Table of Contents (TOC) */
.post-widget-toc {
  position: fixed;
  right: 20px;
  top: 100px; /* Default top */
  width: 260px;
  z-index: 999;
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.08);
  border: 1px solid rgba(255,255,255,0.4);
  /* Use specific transitions to avoid dragging lag */
  transition: width 0.3s, height 0.3s, background 0.3s, box-shadow 0.3s, border-radius 0.3s, backdrop-filter 0.3s;
  max-height: calc(100vh - 140px);
  display: flex;
  flex-direction: column;
}

.post-widget-toc.collapsed {
  width: auto;
  height: auto;
  background: transparent;
  box-shadow: none;
  border: none;
  backdrop-filter: none;
  /* Just show the button */
}

.post-widget-toc.collapsed .toc-content {
  display: none; /* simple hide */
}

/* When collapsed, we might want the header to look like a floating button */
.post-widget-toc.collapsed .toc-header {
  background: var(--primary-color);
  color: white;
  border-radius: 50px;
  padding: 6px 14px; /* Smaller padding for button */
  width: auto;
  display: inline-flex;
  align-items: center;
  box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
}

.post-widget-toc.collapsed .toc-title {
  display: inline-block;
  margin-right: 8px;
  font-size: 13px; /* Smaller text on button */
}

.post-widget-toc.collapsed .toc-toggle span {
   content: "+"; /* Can't change content of span easily via CSS content property on element, need JS or just rotate */
   transform: rotate(45deg); /* Optional: visual clue */
}

.toc-header {
  padding: 10px 15px; /* Compact header */
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid rgba(0,0,0,0.05);
  cursor: move; /* Indicate draggable */
  user-select: none; /* Prevent text selection while dragging */
}

.toc-title {
  font-weight: bold;
  font-family: var(--font-heading);
  font-size: 14px; /* Smaller title */
}

.toc-toggle {
  background: none;
  border: none;
  font-size: 14px; /* Smaller icon */
  cursor: pointer;
  color: inherit;
  width: 20px; /* Smaller touch target */
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.3s;
}

.toc-content {
  padding: 15px 20px;
  overflow-y: auto;
  flex: 1;
  font-size: 14px;
}

.toc-content ol, .toc-content ul {
  list-style: none;
  padding-left: 0;
  margin: 0;
}

.toc-content ol ol, .toc-content ul ul {
  padding-left: 15px;
  margin-top: 5px;
}

.toc-link {
  color: #666;
  text-decoration: none;
  display: block;
  padding: 4px 0;
  transition: all 0.2s;
  border-left: 2px solid transparent;
  padding-left: 10px;
  margin-left: -12px;
}

.toc-link:hover, .toc-link.active {
  color: var(--primary-color);
  border-left-color: var(--primary-color);
  background: linear-gradient(90deg, rgba(255,152,0,0.05), transparent);
}

/* Hide TOC on really small screens, or make it a bottom floating button */
@media (max-width: 1250px) {
  .post-widget-toc {
    right: 10px;
    width: 220px;
    opacity: 0.95;
    /* On medium screens, maybe default to collapsed? */
  }
}

@media (max-width: 768px) {
  .post-widget-toc {
    top: auto;
    bottom: 20px;
    right: 20px;
    max-height: 50vh;
    transform-origin: bottom right;
  }
}

/* Page Transitions & Animations */
@keyframes fadeUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Apply Animations */
.hero-title, .hero-subtitle, .post-list .post-card, .post-container, .archive-header-card, .widget {
  animation: fadeUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) backwards;
}

.hero-title { animation-delay: 0.1s; }
.hero-subtitle { animation-delay: 0.2s; }

/* Stagger Post Cards */
.post-list .post-card:nth-child(1) { animation-delay: 0.1s; }
.post-list .post-card:nth-child(2) { animation-delay: 0.2s; }
.post-list .post-card:nth-child(3) { animation-delay: 0.3s; }
.post-list .post-card:nth-child(4) { animation-delay: 0.4s; }
.post-list .post-card:nth-child(5) { animation-delay: 0.5s; }

/* View Transitions Customization (Optional) */
::view-transition-old(root),
::view-transition-new(root) {
  animation-duration: 0.4s;
}


